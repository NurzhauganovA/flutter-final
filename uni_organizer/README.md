# UniOrganizer

UniOrganizer — мобильное кроссплатформенное приложение для студентов, разработанное на фреймворке Flutter. Приложение решает задачу организации учебного процесса, объединяя в себе расписание занятий, управление академическими задачами (Task Manager), личные заметки и профиль пользователя.

**Цель проекта:** Предоставить удобный инструмент для тайм-менеджмента, доступный на iOS и Android, с синхронизацией данных в реальном времени.

## 1. Архитектура приложения

В проекте используется архитектурный паттерн **MVVM (Model-View-ViewModel)** с пакетом `Provider` для управления состоянием. Это обеспечивает четкое разделение бизнес-логики и пользовательского интерфейса.

* **Model (Модель):** Классы данных (`Task`, `ScheduleItem`, `Note`, `UserProfile`), описывающие структуру объектов.
* **View (Представление):** Экраны (Screens) и виджеты (Widgets), отвечающие за отображение интерфейса. Виджеты пассивны и подписываются на изменения в провайдерах.
* **ViewModel (Провайдеры):** Классы `TaskProvider` и `ScheduleProvider`. Они содержат бизнес-логику, общаются с сервисами и уведомляют UI об изменениях данных.

### Структура проекта
* `/lib/models` — модели данных.
* `/lib/screens` — экраны приложения (Dashboard, Home, Schedule, Notes, Profile, Login).
* `/lib/widgets` — переиспользуемые компоненты (bottom sheets для добавления задач и расписания).
* `/lib/providers` — управление состоянием (ChangeNotifier).
* `/lib/services` — работа с API (Firebase, Notifications).

## 2. Используемые технологии

* **Frontend:** Flutter (Dart).
* **Backend & Database:** Firebase (BaaS).
* **Authentication:** Firebase Auth (Email/Password).
* **Cloud Storage:** Cloud Firestore (NoSQL база данных).
* **Local Services:** `flutter_local_notifications` для отправки напоминаний о задачах и парах.

## 3. Схема базы данных (Cloud Firestore)

Данные хранятся в иерархической структуре. Корневая коллекция — `users`, что обеспечивает приватность и безопасность данных каждого студента.

### Коллекция `users`
Документ пользователя. ID документа совпадает с `uid` из Firebase Auth.
* `uid` (String): Уникальный идентификатор.
* `email` (String): Почта.
* `name` (String): Имя студента.
* `major` (String): Специальность.
* `group` (String): Группа.

#### Подколлекция `tasks` (Задачи)
Хранит список академических дел.
* `title` (String): Название задачи.
* `description` (String): Описание.
* `date` (Timestamp): Дата дедлайна.
* `priority` (String): Приоритет (low, medium, high, urgent).
* `category` (String): Категория (assignment, exam, project, reading, other).
* `isDone` (Boolean): Статус выполнения.
* `createdAt` (Timestamp): Дата создания.

#### Подколлекция `schedule` (Расписание)
Хранит повторяющиеся занятия.
* `subject` (String): Название предмета.
* `type` (String): Тип занятия (Lecture, Lab, Seminar, Practice).
* `location` (String): Аудитория.
* `teacher` (String): Имя преподавателя.
* `weekday` (Number): День недели (1–7).
* `startMinutes` (Number): Время начала в минутах от начала дня.
* `endMinutes` (Number): Время окончания.

#### Подколлекция `notes` (Заметки)
* `title` (String): Заголовок.
* `content` (String): Текст заметки.
* `color` (String): Цвет карточки заметки (для UI).
* `isPinned` (Boolean): Закреплена ли заметка.
* `updatedAt` (Timestamp): Дата последнего изменения.

## 4. Описание сервисов (Services)

### AuthService
Отвечает за взаимодействие с Firebase Auth.
* **Методы:** `signIn` (вход), `signUp` (регистрация), `signOut` (выход).
* **Логика:** При регистрации автоматически создает профиль пользователя в Firestore через `DatabaseService`.
* **Потоки:** Предоставляет стрим `authStateChanges` для отслеживания статуса авторизации в реальном времени.

### DatabaseService
Обертка над Firestore SDK.
* **CRUD:** Инкапсулирует методы Create, Read, Update, Delete для всех коллекций (`tasks`, `schedule`, `notes`).
* **Real-time:** Предоставляет данные в виде потоков (`Stream`), что позволяет интерфейсу обновляться мгновенно при изменении данных на сервере.

### NotificationService
Управляет локальными уведомлениями.
* **Инициализация:** Настройка каналов для Android и разрешений для iOS.
* **scheduleClassNotifications:** Планирует уведомления за 5 минут до начала пары согласно расписанию.
* **scheduleTaskNotifications:** Создает напоминания о дедлайнах (за день до события и в день сдачи).
* **Timezone:** Учитывает часовой пояс пользователя (`flutter_timezone`).

## 5. Реализованный функционал

1.  **Dashboard:** Сводная статистика (процент выполнения задач, ближайшие дедлайны, пары на сегодня).
2.  **Задачи:** Фильтрация по статусу и дате, поиск, цветовая кодировка по категориям.
3.  **Расписание:** Отображение по дням недели, сортировка по времени.
4.  **Заметки:** Создание цветных заметок, возможность закрепления важных записей вверху списка.
5.  **Профиль:** Редактирование личных данных (имя, группа).
6.  **Безопасность:** Доступ к данным только после авторизации. В правилах Firestore настроен доступ `request.auth.uid == userId`.